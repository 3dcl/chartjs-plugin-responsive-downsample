(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){

},{}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var moment_module=require("moment"),moment=window&&window.moment?window.moment:moment_module,utils=require("./utils");function getCompareValue(e){return"number"==typeof e?e:"string"==typeof e?new Date(e).getTime():e instanceof Date?e.getTime():moment(e).toDate().getTime()}function rangeIsEqual(e,t){return!(utils.isNil(e)||utils.isNil(t)||utils.isNil(e[0])||utils.isNil(e[1])||utils.isNil(t[0])||utils.isNil(t[1]))&&(e=[getCompareValue(e[0]),getCompareValue(e[1])],t=[getCompareValue(t[0]),getCompareValue(t[1])],e[0]===t[0]&&e[1]==t[1])}function getScaleRange(e){return utils.isNil(e)?[null,null]:[e.getValueForPixel(e.left),e.getValueForPixel(e.right)]}function cullData(e,t){for(var l=getCompareValue(t[0]),a=getCompareValue(t[1]),i=0,u=e.length,r=1;r<e.length;++r){var n=e[r],o=getCompareValue(n.x||n.t);if(o<=l&&(i=r),o>=a){u=r+1;break}}return e.slice(i,u)}exports.rangeIsEqual=rangeIsEqual,exports.getScaleRange=getScaleRange,exports.cullData=cullData;

},{"./utils":7,"moment":1}],3:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var utils=require("./utils"),DataMipmap=function(){function t(t,i){void 0===i&&(i=2),this.minNumPoints=i,this.setData(t)}return t.prototype.setData=function(t){this.originalData=t||[],this.mipMaps=[],this.resolution=this.computeResolution(this.originalData),this.createMipMap()},t.prototype.setMinNumPoints=function(t){this.minNumPoints=t,this.mipMaps=[],this.createMipMap()},t.prototype.getMipMapForResolution=function(t){return this.getMipMapLevel(this.getMipMapIndexForResolution(t))},t.prototype.getMipMapIndexForResolution=function(t){if(utils.isNil(t))return 0;var i=t/this.resolution;return utils.clamp(Math.floor(Math.log(i)/Math.log(2)),0,this.mipMaps.length-1)},t.prototype.getMipMapLevel=function(t){return this.mipMaps[t]},t.prototype.getMipMaps=function(){return this.mipMaps},t.prototype.getNumLevel=function(){return this.mipMaps.length},t.prototype.computeResolution=function(t){for(var i=1/0,e=0,o=this.originalData.length-1;e<o;++e){var a=this.originalData[e],n=this.originalData[e+1];i=Math.min(Math.abs(this.getTime(a)-this.getTime(n)),i)}return i},t.prototype.createMipMap=function(){var t=this.resolution,i=this.originalData.length;this.mipMaps.push(this.originalData);for(var e=this.originalData;e.length>this.minNumPoints;)t*=2,i=Math.floor(.5*i),e=this.downsampleToResolution(e,t,i),this.mipMaps.push(e)},t.prototype.downsampleToResolution=function(t,i,e){var o=[],a=[],n=t[0];a.push(n);for(var r=1,s=t.length;r<s;++r){var p=t[r];if(Math.abs(this.getTime(n)-this.getTime(p))<i)a.push(p);else{var u=this.getAverage(a);o.push(u),n=p,a=[p]}}return o.push(this.getAverage(a)),o},t.prototype.getAverage=function(t){var i=t.map(function(t){return t.y}).reduce(function(t,i){return t+i})/t.length;return{x:t[0].x||t[0].t,y:i}},t.prototype.getTime=function(t){var i=t.x||t.t;return"number"==typeof i?i:"string"==typeof i?new Date(i).getTime():i.getTime()},t}();exports.DataMipmap=DataMipmap;

},{"./utils":7}],4:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var chartjs=require("chart.js"),Chart=window&&window.Chart?window.Chart:chartjs.Chart,responsive_downsample_plugin_1=require("./responsive_downsample_plugin"),responsive_downsample_plugin_2=require("./responsive_downsample_plugin");exports.ResponsiveDownsamplePlugin=responsive_downsample_plugin_2.ResponsiveDownsamplePlugin,Chart.pluginService.register(new responsive_downsample_plugin_1.ResponsiveDownsamplePlugin);

},{"./responsive_downsample_plugin":6,"chart.js":1}],5:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var utils=require("./utils"),data_mipmap_1=require("./data_mipmap"),LTTBDataMipmap=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getMipMapIndexForResolution=function(t){if(utils.isNil(t))return 0;var e=utils.findIndexInArray(this.resolutions,function(e){return e>=t});return-1===e&&(e=this.resolutions.length-1),e},e.prototype.createMipMap=function(){var e=this;t.prototype.createMipMap.call(this),this.resolutions=this.mipMaps.map(function(t){return e.computeAverageResolution(t)})},e.prototype.downsampleToResolution=function(t,e,r){var o=t.length;if(r>=o||0===r)return t;var i,a,n,p,s=[],u=(o-2)/(r-2),h=0;s.push(t[h]);for(var l=0;l<r-2;++l){for(var f=0,c=0,_=Math.floor((l+1)*u)+1,m=Math.floor((l+2)*u)+1,M=(m=m<o?m:o)-_;_<m;_++)f+=this.getTime(t[_]),c+=1*t[_].y;f/=M,c/=M;var y=Math.floor((l+0)*u)+1,v=Math.floor((l+1)*u)+1,g=t[h],d=this.getTime(g),T=1*g.y;for(a=n=-1;y<v;y++)(n=.5*Math.abs((d-f)*(t[y].y-T)-(d-this.getTime(t[y]))*(c-T)))>a&&(a=n,i=t[y],p=y);s.push(i),h=p}return s.push(t[o-1]),s},e.prototype.computeAverageResolution=function(t){for(var e=0,r=0,o=this.originalData.length-1;r<o;++r){var i=this.originalData[r],a=this.originalData[r+1];e+=Math.abs(this.getTime(i)-this.getTime(a))}return e/(t.length-1)},e}(data_mipmap_1.DataMipmap);exports.LTTBDataMipmap=LTTBDataMipmap;

},{"./data_mipmap":3,"./utils":7}],6:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var moment_module=require("moment"),moment=window&&window.moment?window.moment:moment_module,utils=require("./utils"),data_mipmap_1=require("./data_mipmap"),lttb_data_mipmap_1=require("./lttb_data_mipmap"),data_culling=require("./data_culling"),ResponsiveDownsamplePlugin=function(){function a(){}return a.getPluginOptions=function(a){var e=a.options.responsiveDownsample||{};return utils.defaultsDeep(e,{enabled:!1,aggregationAlgorithm:"LTTB",desiredDataPointDistance:1,minNumPoints:100,cullData:!0}),e.enabled&&(a.options.responsiveDownsample=e),e},a.hasDataChanged=function(a){return!utils.isNil(utils.findInArray(a.data.datasets,function(a){return utils.isNil(a.mipMap)}))},a.createDataMipMap=function(a,e){a.data.datasets.forEach(function(a,t){var i=utils.isNil(a.originalData)?a.data:a.originalData,n="LTTB"===e.aggregationAlgorithm?new lttb_data_mipmap_1.LTTBDataMipmap(i,e.minNumPoints):new data_mipmap_1.DataMipmap(i,e.minNumPoints);a.originalData=i,a.mipMap=n,a.data=n.getMipMapLevel(n.getNumLevel()-1)})},a.restoreOriginalData=function(a){var e=!1;return a.data.datasets.forEach(function(a){utils.isNil(a.originalData)||a.data===a.originalData||(a.data=a.originalData,e=!0)}),e},a.getTargetResolution=function(a,e){var t=a.scales["x-axis-0"];if(utils.isNil(t))return null;var i=moment(t.getValueForPixel(t.left));return moment(t.getValueForPixel(t.left+1)).diff(i)*e.desiredDataPointDistance},a.updateMipMap=function(a,e,t){var i=!1;return a.data.datasets.forEach(function(a,n){var r=a.mipMap;if(!utils.isNil(r)){var o=r.getMipMapIndexForResolution(e.targetResolution);if(o!==a.currentMipMapLevel||t){i=!0,a.currentMipMapLevel=o;var l=r.getMipMapLevel(o);e.cullData&&(l=data_culling.cullData(l,e.scaleRange)),a.data=l}}}),i},a.prototype.beforeInit=function(e){var t=a.getPluginOptions(e);t.enabled&&(a.createDataMipMap(e,t),t.needsUpdate=!0)},a.prototype.beforeDatasetsUpdate=function(e){var t=a.getPluginOptions(e);if(!t.enabled)return t.needsUpdate=a.restoreOriginalData(e),delete t.targetResolution,void delete t.scaleRange;a.hasDataChanged(e)&&(a.createDataMipMap(e,t),t.needsUpdate=!0)},a.prototype.beforeRender=function(e){var t=a.getPluginOptions(e);if(!t.enabled)return t.needsUpdate?(t.needsUpdate=!1,e.update(0),!1):void 0;var i=a.getTargetResolution(e,t),n=e.scales["x-axis-0"],r=data_culling.getScaleRange(n),o=!data_culling.rangeIsEqual(t.scaleRange,r);return(t.needsUpdate||t.targetResolution!==i||o)&&(t.targetResolution=i,t.scaleRange=r,t.needsUpdate=!1,a.updateMipMap(e,t,o))?(e.update(0),!1):void 0},a}();exports.ResponsiveDownsamplePlugin=ResponsiveDownsamplePlugin;

},{"./data_culling":2,"./data_mipmap":3,"./lttb_data_mipmap":5,"./utils":7,"moment":1}],7:[function(require,module,exports){
"use strict";function isNil(r){return void 0===r||null===r}function clamp(r,e,n){return Math.min(Math.max(r,e),n)}function defaultsDeep(r,e){for(var n in e){var i=r[n];void 0===i?r[n]=e[n]:null!==i&&"object"==typeof i&&(r[n]=defaultsDeep(i,e[n]))}return r}function findInArray(r,e){if(!isNil(r))for(var n=0;n<r.length;n++)if(!0===e(r[n]))return r[n]}function findIndexInArray(r,e){if(!isNil(r)){for(var n=0;n<r.length;n++)if(!0===e(r[n]))return n;return-1}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNil=isNil,exports.clamp=clamp,exports.defaultsDeep=defaultsDeep,exports.findInArray=findInArray,exports.findIndexInArray=findIndexInArray;

},{}]},{},[4]);
